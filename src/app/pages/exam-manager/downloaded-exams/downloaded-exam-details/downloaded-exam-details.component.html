<app-breadcrumbs
  title="DOWNLOADED EXAMS > DETAILS"
  [breadcrumbItems]="breadCrumbItems"
></app-breadcrumbs>

<div class="card">
    <div class="card-body">
      <h6 class="mb-3 text-uppercase">Examiners in {{programName}} </h6>
      <div class="d-flex justify-content-between">
  
      
      <div class="search-box d-inline-block mb-2">
        <input type="text" class="form-control search" placeholder="Search for examiner" />
        <i class="ri-search-line search-icon"></i>
      </div>

      <div>
        <button class="btn btn-sm btn-primary" (click)="goBack()">Back</button>
      </div>
  
      <!-- <select class="form-select  mb-3 w-25" aria-label="Default select example">
          <option  disabled selected>Filter by program</option>
          <option value="1">BASIC NURSING</option>
          <option value="2">ORTHOLOGY</option>
          <option value="3">NURSING MATHS</option>
          </select> -->
      </div>
      <div class="table-responsive">
        <table class="table table-gridjs">
          <thead>
            <tr>
              <th class="sort" data-sort="name">Name</th>
              <th class="sort" data-sort="email">Username</th>
              <th class="sort" data-sort="email">Email</th>
              <th class="sort" data-sort="email">Phone number</th>
              <th class="sort" data-sort="position">Program</th>
              <th class="sort" data-sort="position">Procedure</th>
              <th class="sort" data-sort="position">Role</th>
              <th class="sort" data-sort="position">Status</th>
              <th class="sort" data-sort="position">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let examiner of examiners">
              <td>{{examiner.name}}</td>
              <td>{{examiner.username}}
              </td>
              <td>{{examiner.email}}</td>
              <td>{{examiner.phone}}</td>        
              <td>{{programName}}</td>
              <td>{{examiner.procedureName}}</td>
              <td>
                <span class="badge badge-soft-primary" *ngIf="examiner.leader"> Leader</span> <span class="badge badge-soft-warning" *ngIf="!examiner.leader">Non Leader</span>
                
              </td>

              <td>

            

                <div  (change)="getValue( $event, examiner.id)"class="form-check form-switch form-switch-md mx-2" dir="ltr">
                  <input   #inputRef value="{{examiner.active}}" type="checkbox" class="form-check-input" id="customSwitchsizelg" [checked]='examiner.active'>
                  </div>
              </td>
              <td><button class="btn btn-sm btn-primary" (click)="openAddProcedureModal(addProcedureModal)"> <span *ngIf="examiner.procedureId == null"> Add procedure</span>  <span *ngIf="examiner.procedureId != null"> Edit Procedure</span></button></td>
            
            
              <ng-template #addProcedureModal role="document" let-modal>
                <div class="modal-header">
                  <h5 class="modal-title" id="myModalLabel">Add Procedure</h5>
                  <button
                    type="button"
                    class="btn-close"
                    center-bs-dismiss="modal"
                    aria-label="Close"
                    (click)="modal.dismiss('Cross click')"
                  ></button>
                </div>
                <div class="modal-body">
                  
                    <div class="row">
                      
                      <div class="col-lg-12">
                        <div class="mb-3">
                          <label for="designation" class="form-label"
                            >Select Procedure</label
                          >
                          <select class="form-select  mb-3" aria-label="Default select example"
                          #dropBoxRef
                          (change)="captureProcedureToAddToExaminer(examiner.id,  dropBoxRef.value)">
                            <option disabled selected>Select Procedure</option>
                            <option *ngFor="let procedure of procedures; let i=index" value={{procedure.id}}>
                              {{procedure.name}}
                            </option>
                            
                            </select>
                        </div>
                      </div>
                   
                      
                      
                      <div class="col-lg-12">
                        <div class="hstack gap-2 justify-content-end">
                          <button
                            type="button"
                            class="btn btn-light"
                            center-bs-dismiss="modal"
                            
                          >
                            Close
                          </button>
                          
                          <button  class="btn btn-success"

                          (click)="addProcedureToExaminer()">
                            Add Procedure
                          </button>
                        </div>
                      </div>
                    </div>
                
                </div>
              </ng-template>
            
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  
  